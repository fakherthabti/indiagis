<html>

<head>
<title>Title</title>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.hexbin.v0.min.js"></script>
</head>

<body>

<script>
    var margin = {    top: 50,    right: 20,    bottom: 20,    left: 50}, 
        width = 850,
        height = 650;
                
    var MapColumns = 50,
        MapRows = 40;
        
    var hexRadius = d3.min([width/((MapColumns + 0.5) * Math.sqrt(3)),height/((MapRows + 1/3) * 1.5)]);
    
    var hexbin = d3.hexbin()
                  .radius(hexRadius);
                  
    //Calculate the center positions of each hexagon 
    var points = [];
    
    var row=Array(2,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,32,32,32,32,32,33,33,33,34,34,35),column=Array(8,7,8,9,7,8,9,10,29,35,36,6,7,8,9,10,11,12,13,14,15,16,17,18,27,28,29,30,31,32,33,34,35,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,28,29,30,31,32,33,34,35,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,30,31,32,33,34,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,32,33,34,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,32,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,5,6,7,8,9,10,11,12,13,14,15,16,17,18,5,6,7,8,9,10,11,12,13,14,15,16,17,18,5,6,7,8,9,10,11,12,13,14,15,16,17,6,7,8,9,10,11,12,13,14,15,16,17,6,7,8,9,10,11,12,13,14,15,16,7,8,9,10,11,12,13,14,15,7,8,9,10,11,12,13,14,15,8,9,10,11,12,13,14,15,8,9,10,11,12,13,14,15,9,10,11,12,13,14,15,4,9,10,11,12,13,14,26,10,11,12,13,14,10,11,12,11,12,117);
    
    var state=Array(16,16,16,16,28,16,16,13,30,3,3,28,28,13,13,13,33,33,33,34,34,34,34,34,35,35,35,4,4,4,4,4,25,28,28,28,28,28,14,33,33,34,34,34,34,34,34,34,34,34,5,5,5,5,35,35,4,4,4,4,4,22,29,28,28,28,28,7,14,34,34,34,34,34,34,34,34,34,34,34,5,5,5,5,5,35,20,20,4,4,22,29,29,29,28,14,14,14,34,34,34,34,34,34,34,34,34,34,34,5,5,5,5,5,35,4,4,24,29,29,29,29,14,14,14,9,9,34,34,34,34,34,34,34,34,34,5,5,5,5,5,35,35,32,32,29,29,29,29,29,29,14,9,9,9,34,34,34,34,34,34,34,34,5,5,5,5,5,35,35,29,29,29,29,29,29,29,14,9,9,34,34,34,34,34,34,34,34,5,5,5,5,5,35,35,11,11,11,11,11,29,29,29,29,34,34,34,34,34,34,34,34,34,34,5,5,5,5,5,35,35,35,11,11,11,11,11,11,23,23,23,34,34,34,34,34,34,34,34,34,5,5,5,5,5,5,35,35,35,35,11,11,11,11,11,23,23,23,23,23,23,23,23,23,23,23,6,15,15,15,15,15,35,35,35,35,35,35,11,11,11,11,11,23,23,23,23,23,23,23,23,23,23,23,6,6,15,15,15,15,35,35,35,35,35,35,11,11,8,11,11,21,21,23,23,23,23,21,21,21,21,21,6,6,15,15,15,15,35,35,35,35,35,11,10,21,21,21,21,21,21,21,21,21,21,21,6,6,6,15,26,26,26,35,35,35,35,35,21,21,21,21,21,21,21,21,21,21,21,21,21,6,6,26,26,26,26,26,26,21,21,21,21,21,21,21,2,2,2,2,2,2,6,26,26,26,26,26,26,21,21,21,21,18,18,18,2,2,2,2,2,2,2,26,26,26,26,26,26,21,21,21,18,18,18,2,2,2,2,2,2,2,2,21,21,18,18,18,18,18,2,2,2,2,2,2,2,21,18,18,18,18,18,2,2,2,2,2,2,2,12,18,18,18,18,2,2,2,2,2,2,2,12,18,18,18,31,31,31,31,31,31,31,18,18,18,31,31,31,31,31,31,18,18,31,31,31,31,31,31,31,17,17,17,31,31,31,31,27,17,17,17,31,31,31,31,31,17,17,17,31,31,31,31,19,17,17,17,31,31,31,1,17,17,17,31,31,17,17,31,17,17,17);
    
    for(var i=0;i<543;i++){points.push([hexRadius * column[i] * 1.75, hexRadius * row[i] * 1.5]);}
   
    var pickcolor=  d3.scale.category20();
    //d3.scale.linear().domain([0, 35]).range(["white", "steelblue"]).interpolate(d3.interpolateLab);
    
    
    
    var svg = d3.select("body").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                
    svg.append("g")
        .selectAll(".hexagon")
        .data(hexbin(points))
        .enter().append("path")
        .attr("class", "hexagon")
        .attr("d", function (d) {  return "M" + d.x + "," + d.y + hexbin.hexagon(); })
        .attr("stroke", "white")
        .attr("stroke-width", "1px")
        .style("fill", function (d,i) {return pickcolor(state[i]); });
        
</script>

</body>
</html>
